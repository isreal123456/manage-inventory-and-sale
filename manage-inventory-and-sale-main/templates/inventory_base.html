<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Admin{% endblock title %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

  {% block head %}{% endblock head %}

  <style>
    :root {
      --midnight-navy: #1A1A2E;
      --deep-blue: #16213E;
      --ruby-red: #E94560;
      --cloud-white: #F5F5F5;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--cloud-white);
      color: var(--deep-blue);
    }

    .layout {
      display: flex;
      height: 100vh;
    }

    .sidebar {
      margin-top: 60px;
      width: 220px;
      background-color: var(--deep-blue);
      color: var(--cloud-white);
      display: flex;
      flex-direction: column;
      padding: 20px;
      transition: transform 0.3s ease;
    }

    .sidebar a {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--cloud-white);
      text-decoration: none;
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 8px;
      font-weight: 500;
      font-size: 0.9rem;
    }

    .sidebar a:hover,
    .sidebar a.active {
      background-color: var(--ruby-red);
      color: white;
    }

    .main {
      flex: 1;
      overflow-y: auto;
      padding: 90px 30px 30px 30px;
      background-color: var(--cloud-white);
    }

    .toggle-btn {
      display: none;
      background-color: var(--ruby-red);
      border: none;
      font-size: 20px;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 101;
      cursor: pointer;
    }

    .overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 100;
    }

    @media (max-width: 768px) {
      .layout {
        flex-direction: column;
      }

      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100%;
        transform: translateX(-100%);
        z-index: 102;
      }

      .sidebar.open {
        transform: translateX(0);
      }

      .toggle-btn {
        display: block;
      }

      .overlay.show {
        display: block;
      }

      .main {
        padding: 100px 20px 20px 20px;
      }

      .move {
        margin-left: 60px;
      }
    }

    .collapse-toggle {
      display: flex;
      align-items: center;
      gap: 10px;
      width: 100%;
      background: none;
      border: none;
      color: var(--cloud-white);
      padding: 12px 16px;
      border-radius: 8px;
      font-weight: 500;
      font-size: 0.9rem;
      cursor: pointer;
      margin-bottom: 6px;
    }

    .collapse-toggle:hover {
      background-color: var(--ruby-red);
    }

    .submenu {
      display: none;
      flex-direction: column;
      margin-left: 20px;
      margin-bottom: 10px;
    }

    .submenu a {
      padding: 8px 10px;
      font-size: 0.8rem;
      color: var(--cloud-white);
    }

    .submenu a:hover,
    .submenu a.active {
      background-color: var(--ruby-red);
      border-radius: 6px;
      color: white;
    }

    .section-title {
      font-size: 0.75rem;
      color: var(--cloud-white);
      margin: 16px 8px 6px;
      text-transform: uppercase;
      font-weight: bold;
    }
  </style>
</head>

<body>
<!-- Top Navbar -->
<header class="shadow-md w-full fixed top-0 left-0 z-50 flex items-center justify-between px-4 py-3" style="background-color: #16213E; color: white">
  <div class="flex items-center gap-4">
    <button class="toggle-btn" onclick="toggleSidebar()">â˜°</button>
    <div class="move"><h1 class="text-xl font-semibold">Store Keeper Dashboard</h1></div>
  </div>
  <div class="flex items-center gap-3">
    <span class="text-sm">Welcome, {{ user.get_full_name|default:user.username }}</span>
  </div>
</header>

<!-- Overlay -->
<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

<!-- Layout -->
<div class="layout">
  <!-- Sidebar -->
  <nav class="sidebar" id="sidebar">
    <a href="{% url 'inventory_dashboard' %}" class="{% if request.resolver_match.url_name == 'admin_dashboard' %}active{% endif %}">
      <i class="fas fa-home"></i> Dashboard
    </a>

    <button class="collapse-toggle" onclick="toggleSubmenu('productSubmenu')">
      <i class="fas fa-box"></i> Products
      <i class="fas fa-caret-down ml-auto submenu-icon" id="productSubmenuIcon"></i>
    </button>

    <div class="submenu" id="productSubmenu">
      <a href="{% url 'create_category' %}" class="{% if request.resolver_match.url_name == 'create_category_admin' %}active{% endif %}">
        <i class="fas fa-folder-plus"></i> Create Category
      </a>
      <a href="{% url 'create_product' %}" class="{% if request.resolver_match.url_name == 'create_product_admin' %}active{% endif %}">
        <i class="fas fa-plus-circle"></i> Create Product
      </a>
    </div>

    <a href="{% url 'inventory' %}" class="{% if request.resolver_match.url_name == 'inventory_view_admin' %}active{% endif %}">
      <i class="fas fa-boxes"></i> Inventory
    </a>

    <a href="{% url 'logout' %}" style="position: absolute;bottom: 10px">
      <i class="fas fa-sign-out-alt " style="color: red" ></i> Logout
    </a>
  </nav>

  <!-- Main Content -->
  <main class="main flex-grow">
    {% block content %}{% endblock content %}


  </main>
</div>


<!-- JS -->
<script>
  function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    sidebar.classList.toggle('open');
    overlay.classList.toggle('show');
  }

  function toggleSubmenu(id) {
    const submenu = document.getElementById(id);
    const icon = document.getElementById(id + 'Icon');
    submenu.style.display = submenu.style.display === 'flex' ? 'none' : 'flex';
    icon.classList.toggle('fa-caret-down');
    icon.classList.toggle('fa-caret-up');
  }
</script>

{% block scripts %}{% endblock scripts %}
</body>
</html>
